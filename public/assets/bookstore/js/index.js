
/*listProduct*/
var listProduct = [
    {
        'id': 'nb01',
        'url': 'newbook01.jpg',
        'name': 'Bơ Đi Mà Sống',
        'price': 75000,
        'star': 5,
        'status': 'new',
        'sale': 0,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb02',
        'url': 'newbook02.jpg',
        'name': 'Diệt Slime Suốt 300 Năm',
        'price': 69000,
        'star': 4,
        'status': 'new',
        'sale': 37,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb03',
        'url': 'newbook03.jpg',
        'name': 'Đủ Xa Sẽ Cũ Đủ Lạ Sẽ Quên',
        'price': 86000,
        'star': 4,
        'status': 'new',
        'sale': 0,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb04',
        'url': 'newbook04.jpg',
        'name': 'Hành Trình Của Alaina - Tập 1',
        'price': 82000,
        'star': 3,
        'status': 'new',
        'sale': 0,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb05',
        'url': 'newbook05.jpg',
        'name': 'Cốt Cách Phụ Nữ',
        'price': 86000,
        'star': 5,
        'status': 'new',
        'sale': 0,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb06',
        'url': 'newbook06.jpg',
        'name': 'Khéo Ăn Khéo Nói Sẽ Có Được Thiên Hạ',
        'price': 88000,
        'star': 4,
        'status': 'new',
        'sale': 40,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb07',
        'url': 'newbook07.jpg',
        'name': 'Đắc Nhân Tâm',
        'price': 82000,
        'star': 4,
        'status': 'new',
        'sale': 37,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb08',
        'url': 'newbook08.jpg',
        'name': 'Sherlock Homes Toàn Tập - Bộ 3 Cuốn',
        'price': 88000,
        'star': 4,
        'status': 'new',
        'sale': 0,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb09',
        'url': 'newbook09.jpg',
        'name': 'Người Xưa Đã Quên Ngày Xưa',
        'price': 92000,
        'star': 3,
        'status': 'new',
        'sale': 36,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb10',
        'url': 'newbook10.jpg',
        'name': 'Hôm Nay Tôi Thất Tình',
        'price': 86000,
        'star': 5,
        'status': 'new',
        'sale': 37,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb11',
        'url': 'newbook11.jpg',
        'name': 'Nhớ Ai Đó Đến Kiệt Quệ',
        'price': 89000,
        'star': 5,
        'status': 'new',
        'sale': 37,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'nb12',
        'url': 'newbook12.jpg',
        'name': 'Nhớ Ai Đó Đến Kiệt Quệ',
        'price': 92000,
        'star': 3,
        'status': 'new',
        'sale': 40,
        'nxb': '',
        'category': 'newbook',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs01',
        'url': 'best-sell-01.jpg',
        'name': 'Pato Và Con Thú Mỏ Vịt',
        'price': 90000,
        'star': 4,
        'status': 'new',
        'sale': 30,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs02',
        'url': 'best-sell-02.jpg',
        'name': 'Yêu Dấu',
        'price': 110000,
        'star': 5,
        'status': '',
        'sale': 35,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs03',
        'url': 'best-sell-03.jpg',
        'name': 'Sóng Ngầm',
        'price': 95000,
        'star': 3,
        'status': '',
        'sale': 32,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs04',
        'url': 'best-sell-04.jpg',
        'name': 'Hay Lời Tự Thú Của Một Copy-Writer',
        'price': 85000,
        'star': 5,
        'status': 'new',
        'sale': 35,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs05',
        'url': 'best-sell-05.jpg',
        'name': 'Một Lít Nước Mắt',
        'price': 100000,
        'star': 3,
        'status': 'new',
        'sale': 40,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs06',
        'url': 'best-sell-06.jpg',
        'name': 'Có Một Phố Vừa Đi Qua Phốt',
        'price': 120000,
        'star': 4,
        'status': '',
        'sale': 40,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs07',
        'url': 'best-sell-07.jpg',
        'name': 'Thằng Nhóc',
        'price': 110000,
        'star': 4,
        'status': 'new',
        'sale': 37,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs08',
        'url': 'best-sell-08.png',
        'name': 'Cơn Sốt Lúc Bình Minh',
        'price': 80000,
        'star': 5,
        'status': '',
        'sale': 32,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs09',
        'url': 'best-sell-09.jpg',
        'name': 'Tên Tôi Là Đỏ',
        'price': 135000,
        'star': 4,
        'status': 'new',
        'sale': 40,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs10',
        'url': 'best-sell-10.jpg',
        'name': 'Con Đường Hồi Giáo',
        'price': 125000,
        'star': 4,
        'status': '',
        'sale': 38,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bs11',
        'url': 'best-sell-11.jpg',
        'name': 'Dưới Một Mái Nhà Ở Pari',
        'price': 119000,
        'star': 3,
        'status': 'new',
        'sale': 35,
        'nxb': '',
        'category': 'bestsell',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw01',
        'url': 'best-view-01.jpg',
        'name': 'Chuyện Ông Gióng',
        'price': 92000,
        'star': 4,
        'status': 'new',
        'sale': 0,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw02',
        'url': 'best-view-02.jpg',
        'name': 'Kính Vạn Hoa',
        'price': 85000,
        'star': 4,
        'status': 'new',
        'sale': 30,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw03',
        'url': 'best-view-03.jpg',
        'name': 'Sự Tích Hồ Gươm',
        'price': 90000,
        'star': 4,
        'status': 'new',
        'sale': 32,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw04',
        'url': 'best-view-04.jpg',
        'name': 'Tô Màu',
        'price': 120000,
        'star': 4,
        'status': '',
        'sale': 40,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw05',
        'url': 'best-view-05.jpg',
        'name': 'Bé Trổ Tài Tô Màu',
        'price': 85000,
        'star': 4,
        'status': '',
        'sale': 35,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw06',
        'url': 'best-view-06.jpg',
        'name': 'Họa Sĩ Nhí Tô Màu',
        'price': 120000,
        'star': 4,
        'status': 'new',
        'sale': 42,
        'nxb': '',
        'category': '',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw07',
        'url': 'best-view-07.jpg',
        'name': 'Nàng Lọ Lem Trong Ngày Cưới',
        'price': 88000,
        'star': 4,
        'status': 'new',
        'sale': 37,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw08',
        'url': 'best-view-08.jpg',
        'name': 'Sự Tích Bánh Chưng Bánh Giầy',
        'price': 95000,
        'star': 4,
        'status': 'new',
        'sale': 35,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw09',
        'url': 'best-view-09.jpg',
        'name': 'Cậu Bé Tích Chu',
        'price': 82000,
        'star': 4,
        'status': '',
        'sale': 32,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    },
    {
        'id': 'bw10',
        'url': 'best-view-10.jpg',
        'name': 'Sự Tích Con Cóc',
        'price': 110000,
        'star': 4,
        'status': 'new',
        'sale': 40,
        'nxb': '',
        'category': 'bestview',
        'view': 0,
        'sell-amount': 0,
        'stock': 5,
        'origin': 'Trung Quốc',
        'description': 'Lorem Ipsum',
        'html': '06.html',
    }
];
/* end listProduct*/

/* list banner*/
var banner = [
    'banner01.jpg',
    'banner02.png',
    'banner03.png',
    'banner04.jpg',
    'banner05.jpg',
    'banner06.jpg',
    'banner07.jpg'
];
/* end list banner*/

/* list NXB */
var NXB = [
    {
        name: 'nxb01.jpg',
        html: 'nhanam.html'
    },
    {
        name: 'nxb02.jpg',
        html: 'bachviet.html'
    },
    {
        name: 'nxb03.jpg',
        html: 'kimdong.html'
    },
    {
        name: 'nxb04.jpg',
        html: 'nxbtre.html'
    },
    {
        name: 'nxb05.jpg',
        html: 'bachviet.html'
    },
    {
        name: 'nxb06.jpg',
        html: 'nhanam.html'
    },
    {
        name: 'nxb07.jpg',
        html: 'nxbtre.html'
    },
    {
        name: 'nxb08.jpg',
        html: 'kimdong.html'
    },
    {
        name: 'nxb09.jpg',
        html: 'bachviet.html'
    },
    {
        name: 'nxb10.jpg',
        html: 'nxbtre.html'
    },
    {
        name: 'nxb11.jpg',
        html: 'kimdong.html'
    },
    {
        name: 'nxb12.jpg',
        html: 'nhanam.html'
    }
];
/* end list NXB */

/* url đến 3 loại sách*/
var urlNewBook = '/assets/img/new-book/';
var urlBestSell = '../assets/img/best-sell/';
var urlBestView = '../assets/img/best-view/';
/* end url đến 3 loại sách*/

/* load 3 loại sách lên giao diện index */
for (var i = 0; i < listProduct.length; i++) {
    var strStar = '';
    var strNew = '';
    var strPrice = '';
    var strSale = '';
    var url;
    var jq;
    if (listProduct[i].category === 'newbook') {
        url = urlNewBook;
        jq = '#product-slick-1';
    }
    else if (listProduct[i].category === 'bestsell') {
        url = urlBestSell;
        jq = '#product-slick-2';
    }
    else {
        url = urlBestView;
        jq = '#product-slick-3';
    }
    if (listProduct[i].sale === 0) {
        strPrice = `<h3 class="product-price"><a>${(listProduct[i].price).toLocaleString('de-DE')}đ </a>
        </h3>`;
    }
    else {
        strPrice = `<h3 class="product-price"><a>${(listProduct[i].price * (100 - listProduct[i].sale) / 100).toLocaleString('de-DE')}đ </a>
        <del class="product-old-price">${(listProduct[i].price).toLocaleString('de-DE')}đ</del>
        </h3>
        `;
        strSale = `<span class="sale">-${listProduct[i].sale}%</span>`;
    }
    for (var j = 0; j < 5; j++) {
        if (j < listProduct[i].star) {
            strStar += '<i class="fa fa-star"></i>';
        }
        else {
            strStar += '<i class="fa fa-star-o empty"></i>';
        }
    }
    if (listProduct[i].status === 'new') {
        strNew += '<span>New</span>';
    }
    $(jq).append(`
	<div class="product product-single">
		<div class="product-thumb">
                                    <div class="product-label">
                                    ${strSale}
                                        ${strNew}
                                    </div>
									<a href="./product-page/01.html"><img src="${url}${listProduct[i].url}" alt=""></a>
								</div>
								<div class="product-body">
                                ${strPrice}
									<div class="product-rating">${strStar}</div>
									<h2 class="product-name"><a href="./product-page/01.html">${listProduct[i].name}</a></h2>
									<div style="text-align: right;" class="product-btns">
										<button id="${listProduct[i].id}" class="primary-btn add-to-cart" title="Add to cart"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
									</div>
								</div>
							</div>
    `);
}
/* end load 3 loại sách lên giao diện index */

/*load banner lên giao diện index*/
for (var i = 0; i < banner.length; i++) {
    $('#home-slick').append(`
                <!-- banner -->
					<div class="banner banner-1">
						<img src="/assets/bookstore/img/banner/${banner[i]}" alt="">
					</div>
	            <!-- /banner -->
    `);
}
/* end load banner lên giao diện index */

/*load NXB lên giao diện index */
for (var i = 0; i < NXB.length; i++) {
    $('#nxb').append(`
                         <li>
							<a href="../app/products/${NXB[i].html}">
								<figure>
									<img src="../assets//img/lblNXB/${NXB[i].name}" alt="">
								</figure>
							</a>
	                    </li>
    `)
}
/* end load NXB lên giao diện*/

/* chức năng add to cart */

var cart = [];

/*constructor Item để add vào cart[] */
var Item = function (id, name, url, nameImg, price, count) {
    this.id = id;
    this.name = name;
    this.url = url;
    this.nameImg = nameImg;
    this.price = price;
    this.count = count;
}
/*end constructor Item để add vào cart[] */

/* hàm add 1 sản phẩm vào cart[] */
function AddToCart(id, name, url, nameImg, price, count) {
    for (var i = 0; i < cart.length; i++) {
        if (cart[i].id === id) {
            cart[i].count += count;
            return;
        }
    }
    var newItem = new Item(id, name, url, nameImg, price, count);
    cart.push(newItem);
}
/*end hàm add 1 sản phẩm vào cart[] */

/* hàm delete 1 sản phẩm vào cart[] */
function removeItem(id) {
    for (var i = 0; i < cart.length; i++) {
        if (cart[i].id === id) {
            cart.splice(i, 1);
            return;
        }
    }
}
/*end hàm delete 1 sản phẩm vào cart[] */


/*hàm tính tổng tiền*/
function totalCost(cart) {
    var sum = 0;
    for (var i = 0; i < cart.length; i++) {
        sum += cart[i].price * cart[i].count;
    }
    return sum;
}
/*end hàm tính tổng tiền*/

if (cart.length === 0) {
    $('#totalcost').append(`<span id="cost">0đ</span>`);
    $('#qty').append(`<span d="notification" class="qty">${cart.length}</span>`);
}
for (var i = 0; i < listProduct.length; i++) {

    var jq = `#${listProduct[i].id}`; //tạo id cho nút ADD TO CART của sách
    $(jq).on('click', function () {
        var id = $(this).attr('id'); //lấy id của nút vừa click
        /*add sách vào cart[] nếu trùng id */
        for (var j = 0; j < listProduct.length; j++) {
            if (listProduct[j].id === id) {
                if (listProduct[j].category === 'newbook')
                    url = urlNewBook;
                else if (listProduct[j].category === 'bestsell')
                    url = urlBestSell;
                else if (listProduct[j].category === 'bestview')
                    url = urlBestView;
                if (cart.length === 0) {
                    cart.push(new Item(listProduct[j].id, listProduct[j].name, url, listProduct[j].url, listProduct[j].price * (100 - listProduct[j].sale) / 100, 1));
                }
                else AddToCart(listProduct[j].id, listProduct[j].name, url, listProduct[j].url, listProduct[j].price * (100 - listProduct[j].sale) / 100, 1);
            }
        }
        /* end add sách vào cart nếu trùng id */

        /*remove danh sách trong cart[] hiện có */
        for (var k = 0; k < cart.length; k++) {
            var idBtnDel = `#div${cart[k].id}`;
            $(idBtnDel).remove();
        }
        /*end remove danh sách trong cart[] hiện có */

        /*append lại danh sách hiện có trong cart[] */
        for (var h = 0; h < cart.length; h++) {
            var idDel = `delete${cart[h].id}`;
            var idDiv = `div${cart[h].id}`;
            $('#cart').append(`
                                        <div id="${idDiv}" class="product product-widget">
                                            <div class="product-thumb">
        										<img id="imgCart" src="${cart[h].url}${cart[h].nameImg}" alt="">
        									</div>
        									<div class="product-body">
        										<h3 class="product-price">${cart[h].price.toLocaleString('de-DE')}đ
        											<span class="qty">x${cart[h].count}</span>
        										</h3>
        										<h2 class="product-name">
        											<a href="../app/product-page/04.html">${cart[h].name}</a>
        										</h2>
        									</div>
        									<button id="${idDel}" class="cancel-btn">
        										<i class="fa fa-trash"></i>
        									</button>
        								</div>
            `);
            var total = totalCost(cart).toLocaleString('de-DE');
            $('#cost').remove();
            $('#totalcost').append(`<span id="cost">${total}đ</span>`);
            $('#notification').remove();
            $('#qty').append(`<span id="notification" class="qty">${cart.length}</span>`);
        }
        /*end append lại danh sách hiện có trong cart[] */
        /* sự kiện click nút delete trong cart */
        for (var i = 0; i < cart.length; i++) {
            var btn = `#delete${cart[i].id}`; //tạo id cho nút delete trong cart[]
            $(btn).on('click', function () {
                var id = $(this).attr('id'); //lấy id nút vừa click
                for (var j = 0; j < cart.length; j++) {
                    var strId = `delete${cart[j].id}`;
                    if (strId === id) {
                        var idDiv = `#div${cart[j].id}`;
                        removeItem(cart[j].id);
                        $(idDiv).remove(); //xóa thẻ div có id = idDiv
                        var total = totalCost(cart).toLocaleString('de-DE');
                        $('#cost').remove();
                        $('#totalcost').append(`<span id="cost">${total}đ</span>`);
                        $('#notification').remove();
                        $('#qty').append(`<span id="notification" class="qty">${cart.length}</span>`);
                        break;
                    }
                }

            });

        }
        /*end sự kiện click nút delete trong cart */
    });
}
/*end chức năng add to cart */